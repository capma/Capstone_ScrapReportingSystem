@model Stackpole.ViewModels.ScrapViewModel
@using System.Web.Script.Serialization
<link href="~/Content/jquery-ui.css" rel="stylesheet" />

@{
    ViewBag.Title = "Create Scrap";
    string data = new JavaScriptSerializer().Serialize(Model);
    var viewBagListPlants = new JavaScriptSerializer().Serialize(ViewBag.listPlants);
}

@section scripts {
    <script src="~/Scripts/knockout-3.5.0.js"></script>
    <script src="~/Scripts/knockout.mapping-latest.js"></script>
    <script src="~/Scripts/jquery.validate.js"></script>
    <script src="~/Scripts/jquery-validate.bootstrap-tooltip.js"></script>
    <script src="~/Scripts/moment.js"></script>

    <script src="~/Scripts/bootstrap-notify.js"></script>
    <script src="~/Scripts/Stackpole/scrapViewModel.js"></script>
    <script type="text/javascript">
        var scrapViewModel = new ScrapViewModel(@Html.Raw(data));

        var listPlantsFromViewBag = @Html.Raw(viewBagListPlants);
        scrapViewModel.listPlants(listPlantsFromViewBag);

        ko.applyBindings(scrapViewModel);
    </script>
}

@Html.Partial("~/Views/Shared/Scrap/_EditScrap.cshtml")